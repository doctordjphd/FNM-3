<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magic: The Gathering Events</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: white;
            color: black;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            border: 3px solid black;
            padding: 20px;
        }

        .logo {
            width: 150px;
            height: auto;
            margin-bottom: 20px;
            filter: grayscale(100%) contrast(200%);
        }

        h1 {
            font-size: 2.5em;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .reserve-section {
            background: black;
            color: white;
            padding: 30px;
            margin-bottom: 30px;
            border: 3px solid black;
            text-align: center;
        }

        .reserve-section h2 {
            font-size: 2em;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .event-card {
            border: 2px solid black;
            padding: 20px;
            margin-bottom: 20px;
            background: white;
            color: black;
        }

        .event-date {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 15px;
            text-transform: uppercase;
        }

        .event-details {
            margin-bottom: 20px;
            font-size: 1.1em;
        }

        .reserve-btn {
            background: white;
            color: black;
            border: 2px solid white;
            padding: 15px 30px;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            width: 100%;
            max-width: 300px;
        }

        .reserve-btn:hover {
            background: black;
            color: white;
            border: 2px solid white;
        }

        .info-section {
            border: 2px solid black;
            padding: 20px;
            margin-bottom: 20px;
        }

        .info-section h3 {
            font-size: 1.3em;
            margin-bottom: 15px;
            text-transform: uppercase;
            font-weight: bold;
        }

        .employee-link {
            text-align: center;
            margin-top: 30px;
        }

        .employee-link a {
            color: black;
            text-decoration: none;
            font-weight: bold;
            border: 2px solid black;
            padding: 10px 20px;
            transition: all 0.3s ease;
        }

        .employee-link a:hover {
            background: black;
            color: white;
        }

        .no-events {
            text-align: center;
            font-size: 1.2em;
            margin: 40px 0;
            padding: 20px;
            border: 2px solid black;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="https://via.placeholder.com/150x100/000000/FFFFFF?text=NJCS" alt="NJComicStop Logo" class="logo">
            <h1>Magic: The Gathering Events</h1>
            <div class="subtitle">NJComicStop - Friday Night Magic</div>
        </div>

        <div class="reserve-section">
            <h2>Reserve Your Seat</h2>
            <div id="current-event"></div>
        </div>

        <div class="info-section">
            <h3>Event Details</h3>
            <p><strong>Format:</strong> Commander (EDH)</p>
            <p><strong>Time:</strong> 7:00 PM - 10:00 PM</p>
            <p><strong>Entry Fee:</strong> $5</p>
            <p><strong>Prize:</strong> Store Credit based on participation</p>
            <p><strong>Seats Available:</strong> 20</p>
        </div>

        <div class="info-section">
            <h3>How to Reserve</h3>
            <p>1. Click "Reserve Your Seat" above</p>
            <p>2. Complete payment via PayPal</p>
            <p>3. Your seat will be confirmed automatically</p>
            <p>4. Arrive 15 minutes early for check-in</p>
        </div>

        <div class="info-section">
            <h3>Store Information</h3>
            <p><strong>Location:</strong> NJComicStop</p>
            <p><strong>Address:</strong> [Store Address]</p>
            <p><strong>Phone:</strong> [Store Phone]</p>
            <p><strong>Email:</strong> [Store Email]</p>
        </div>

        <div class="employee-link">
            <a href="employee.html">Employee Dashboard</a>
        </div>
    </div>

    <script>
        function getNextFridayToShow() {
            const today = new Date();
            const june14th = new Date('2024-06-14'); // First event date
            
            // If we haven't reached June 14th yet, show June 14th
            if (today < june14th) {
                return june14th;
            }
            
            // We've passed June 14th, so determine which Friday to show
            const currentDay = today.getDay(); // 0 = Sunday, 1 = Monday, ..., 5 = Friday, 6 = Saturday
            
            // Find this week's Friday
            const daysUntilFriday = (5 - currentDay + 7) % 7; // Days until Friday (0 if today is Friday)
            const thisWeeksFriday = new Date(today);
            thisWeeksFriday.setDate(today.getDate() + daysUntilFriday);
            
            // If today is before Friday (Sunday-Thursday), show this week's Friday
            if (currentDay < 5) {
                return thisWeeksFriday;
            }
            
            // If today is Friday or after (Friday-Saturday), show next week's Friday
            const nextWeeksFriday = new Date(thisWeeksFriday);
            nextWeeksFriday.setDate(thisWeeksFriday.getDate() + 7);
            return nextWeeksFriday;
        }

        function formatDate(date) {
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            return date.toLocaleDateString('en-US', options);
        }

        function createPayPalButton(eventDate) {
            const dateStr = eventDate.toISOString().split('T')[0];
            const formattedDate = formatDate(eventDate);
            
            return `
                <div class="event-card">
                    <div class="event-date">${formattedDate} - Commander</div>
                    <div class="event-details">
                        <strong>Time:</strong> 7:00 PM - 10:00 PM<br>
                        <strong>Entry Fee:</strong> $5<br>
                        <strong>Prize:</strong> Store Credit<br>
                        <strong>Seats:</strong> 20 Available
                    </div>
                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                        <input type="hidden" name="cmd" value="_s-xclick">
                        <input type="hidden" name="hosted_button_id" value="YOUR_PAYPAL_BUTTON_ID">
                        <input type="hidden" name="item_name" value="FNM Commander - ${formattedDate}">
                        <input type="hidden" name="item_number" value="${dateStr}">
                        <input type="hidden" name="amount" value="5.00">
                        <input type="hidden" name="currency_code" value="USD">
                        <button type="submit" class="reserve-btn">Reserve Your Seat - $5</button>
                    </form>
                </div>
            `;
        }

        function renderCurrentEvent() {
            const eventDate = getNextFridayToShow();
            const container = document.getElementById('current-event');
            
            // Check if the event is within our season (June 14 - September 30, 2024)
            const seasonEnd = new Date('2024-09-30');
            
            if (eventDate > seasonEnd) {
                container.innerHTML = `
                    <div class="no-events">
                        <h3>Season Complete</h3>
                        <p>Friday Night Magic season has ended for 2024.</p>
                        <p>Check back for updates on future events!</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = createPayPalButton(eventDate);
        }

        // Load current event when page loads
        document.addEventListener('DOMContentLoaded', renderCurrentEvent);
    </script>
</body>
</html>
